<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Cari Plat No - Clearance Face Search</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #f8f9fa;
            color: #333;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            width: 280px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transition: all 0.3s ease;
            z-index: 1000;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .sidebar.collapsed {
            width: 70px;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .sidebar-logo {
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .sidebar-title {
            font-size: 1.2rem;
            font-weight: 700;
            white-space: nowrap;
            opacity: 1;
            transition: opacity 0.3s ease;
        }

        .sidebar.collapsed .sidebar-title {
            opacity: 0;
        }

        .sidebar-menu {
            padding: 20px 0;
            flex: 1;
        }

        /* Sidebar Footer */
        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
            margin-top: auto;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: white;
        }

        .user-details {
            flex: 1;
        }

        .user-name {
            font-weight: 600;
            color: white;
            font-size: 0.9rem;
        }

        .user-role {
            font-size: 0.8rem;
            opacity: 0.7;
            color: rgba(255,255,255,0.8);
        }

        .logout-btn {
            width: 100%;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.2);
        }

        .sidebar.collapsed .logout-btn span {
            opacity: 0;
        }

        .menu-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 20px;
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .menu-item:hover {
            background: rgba(255,255,255,0.1);
            color: white;
            border-left-color: rgba(255,255,255,0.5);
        }

        .menu-item.active {
            background: rgba(255,255,255,0.15);
            color: white;
            border-left-color: white;
        }

        .menu-item i {
            font-size: 1.2rem;
            width: 20px;
            text-align: center;
        }

        .menu-item span {
            font-weight: 500;
        }

        .nav-submenu {
            margin-left: 20px;
            margin-top: 5px;
        }

        .nav-submenu .menu-item {
            padding: 10px 25px;
            font-size: 0.9rem;
        }

        /* Main Content */
        .main-content {
            margin-left: 280px;
            min-height: 100vh;
            transition: margin-left 0.3s ease;
        }

        .sidebar.collapsed + .main-content {
            margin-left: 70px;
        }

        .topbar {
            background: white;
            padding: 20px 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .topbar-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .sidebar-toggle {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #667eea;
            cursor: pointer;
            padding: 10px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .mobile-menu-btn {
            display: none;
        }

        .sidebar-toggle:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .page-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #1a202c;
        }

        .topbar-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .search-box {
            position: relative;
        }

        .search-box input {
            padding: 10px 15px 10px 40px;
            border: 2px solid #e1e5e9;
            border-radius: 25px;
            width: 300px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .search-box input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #9ca3af;
        }

        .notification-btn {
            position: relative;
            background: none;
            border: none;
            font-size: 1.2rem;
            color: #6b7280;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .notification-btn:hover {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }

        .notification-badge {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #ef4444;
            color: white;
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 10px;
            min-width: 18px;
            text-align: center;
        }

        /* Content Area */
        .content-area {
            padding: 30px;
        }

        /* Page Header */
        .page-header {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .page-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .page-header h1 {
            font-size: 2rem;
            font-weight: 800;
            color: #1e293b;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .page-header h1 i {
            font-size: 2.2rem;
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .page-header p {
            color: #64748b;
            font-size: 1.1rem;
            line-height: 1.6;
            font-weight: 400;
        }

        /* Filters */
        .filters {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
        }

        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
        }

        .filter-group label {
            font-weight: 600;
            color: #374151;
            margin-bottom: 10px;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .filter-group input,
        .filter-group select {
            padding: 14px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            background: #f8fafc;
        }

        .filter-group input:focus,
        .filter-group select:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
            transform: translateY(-1px);
        }

        .filter-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a67d8;
        }

        .btn-secondary {
            background: #6b7280;
            color: white;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        .btn-danger {
            background: #ef4444;
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        /* Data Table */
        .data-table-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f1f5f9;
        }

        .table-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: #1e293b;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .table-title::before {
            content: '';
            width: 4px;
            height: 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 2px;
        }

        .table-actions {
            display: flex;
            gap: 10px;
        }

        .data-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-bottom: 25px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        }

        .data-table th,
        .data-table td {
            padding: 18px 16px;
            text-align: left;
            border-bottom: 1px solid #f1f5f9;
        }

        .data-table th {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            font-weight: 700;
            color: #334155;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .data-table th:first-child {
            border-top-left-radius: 12px;
        }

        .data-table th:last-child {
            border-top-right-radius: 12px;
        }

        .data-table td {
            font-size: 0.9rem;
            color: #475569;
            background: white;
            transition: all 0.2s ease;
        }

        .data-table tbody tr {
            transition: all 0.2s ease;
        }

        .data-table tbody tr:hover {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .data-table tbody tr:hover td {
            color: #1e293b;
        }

        /* Mobile Cards - Hidden on Desktop */
        .mobile-cards {
            display: none;
        }

        /* Ensure mobile cards are visible when they should be */
        @media (max-width: 768px) {
            .mobile-cards {
                display: block !important;
                visibility: visible !important;
                opacity: 1 !important;
                min-height: 50px;
            }
        }

        /* Ensure desktop shows table and hides mobile cards */
        @media (min-width: 769px) {
            .mobile-cards {
                display: none !important;
                visibility: hidden !important;
                opacity: 0 !important;
            }
            
            .data-table {
                display: table !important;
                visibility: visible !important;
                opacity: 1 !important;
            }
        }

        .status-badge {
            padding: 6px 14px;
            border-radius: 25px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .status-active {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }

        .status-inactive {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
        }

        .action-buttons {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .action-buttons .btn {
            padding: 8px 12px;
            font-size: 0.75rem;
            border-radius: 8px;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .action-buttons .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 0.8rem;
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 12px;
            margin-top: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: 15px;
            border: 1px solid #e2e8f0;
        }

        .pagination button {
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            background: white;
            color: #475569;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .pagination button:hover:not(:disabled) {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .pagination button:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            background: #f1f5f9;
            color: #94a3b8;
        }

        .pagination .active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .pagination span {
            font-weight: 600;
            color: #334155;
            padding: 0 10px;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 60px 20px;
            color: #64748b;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: 20px;
            border: 2px solid #e2e8f0;
        }

        .loading i {
            font-size: 3rem;
            margin-bottom: 20px;
            animation: spin 1s linear infinite;
            color: #667eea;
        }

        .loading p {
            font-size: 1.1rem;
            color: #334155;
            font-weight: 500;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 80px 20px;
            color: #64748b;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: 20px;
            border: 2px dashed #cbd5e1;
        }

        .empty-state i {
            font-size: 5rem;
            margin-bottom: 25px;
            opacity: 0.6;
            color: #94a3b8;
        }

        .empty-state h3 {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: #334155;
            font-weight: 600;
        }

        .empty-state p {
            font-size: 1rem;
            color: #64748b;
            max-width: 400px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* Toast Messages */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 10000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.success {
            background: #10b981;
        }

        .toast.error {
            background: #ef4444;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 10000;
            animation: fadeIn 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            max-width: 900px;
            width: 95%;
            max-height: 95vh;
            overflow-y: auto;
            animation: slideIn 0.3s ease;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .modal-header {
            padding: 30px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 20px 20px 0 0;
        }

        .modal-header h3 {
            font-size: 1.4rem;
            font-weight: 600;
            color: white;
            margin: 0;
        }

        .modal-header .modal-close {
            color: white;
            background: rgba(255,255,255,0.2);
        }

        .modal-header .modal-close:hover {
            background: rgba(255,255,255,0.3);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #6b7280;
            cursor: pointer;
            padding: 5px;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: #f3f4f6;
            color: #374151;
        }

        .modal-body {
            padding: 25px;
        }

        .modal-footer {
            padding: 25px;
            border-top: 1px solid #e5e7eb;
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Tablet Responsive */
        @media (max-width: 1024px) and (min-width: 769px) {
            .filters-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            
            .filter-actions {
                flex-direction: row;
                flex-wrap: wrap;
            }
            
            .filter-actions .btn {
                flex: 1;
                min-width: 120px;
            }
            
            .data-table {
                font-size: 0.85rem;
            }
            
            .data-table th,
            .data-table td {
                padding: 12px 10px;
            }
            
            .table-actions {
                flex-wrap: wrap;
                gap: 8px;
            }
            
            .table-actions .btn {
                flex: 1;
                min-width: 100px;
                font-size: 0.8rem;
            }
        }

        /* Sidebar Overlay */
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            /* Force hide table and show mobile cards */
            .data-table {
                display: none !important;
            }
            
            .mobile-cards {
                display: block !important;
                visibility: visible !important;
                opacity: 1 !important;
            }

            .mobile-card {
                background: white;
                border-radius: 12px;
                padding: 20px;
                margin-bottom: 15px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                border: 1px solid #e2e8f0;
            }

            .mobile-card-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 15px;
                padding-bottom: 10px;
                border-bottom: 2px solid #f1f5f9;
            }

            .mobile-card-title {
                font-weight: 700;
                color: #1e293b;
                font-size: 1.1rem;
            }

            .mobile-card-status {
                padding: 4px 12px;
                border-radius: 20px;
                font-size: 0.75rem;
                font-weight: 600;
            }

            .mobile-card-content {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 12px;
                margin-bottom: 15px;
            }

            .mobile-card-field {
                display: flex;
                flex-direction: column;
            }

            .mobile-card-label {
                font-size: 0.75rem;
                font-weight: 600;
                color: #64748b;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                margin-bottom: 4px;
            }

            .mobile-card-value {
                font-size: 0.9rem;
                color: #334155;
                font-weight: 500;
            }

            .mobile-card-actions {
                display: flex;
                gap: 8px;
                justify-content: flex-end;
            }

            .mobile-card-actions .btn {
                padding: 8px 12px;
                font-size: 0.75rem;
                border-radius: 6px;
            }
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }

            .sidebar.mobile-open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                width: 100%;
            }

            .topbar {
                padding: 15px 20px;
            }

            .topbar-left h1 {
                font-size: 1.2rem;
            }

            .search-box {
                display: none;
            }

            .mobile-menu-btn {
                display: block;
                background: none;
                border: none;
                font-size: 1.5rem;
                color: #374151;
                cursor: pointer;
                margin-right: 15px;
            }

            .page-title {
                font-size: 1.4rem;
            }

            .content-area {
                padding: 15px;
                min-height: 100vh;
            }

            .page-header {
                padding: 25px 20px;
                margin-bottom: 25px;
                border-radius: 15px;
            }

            .page-header h1 {
                font-size: 1.5rem;
                margin-bottom: 12px;
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            .page-header h1 i {
                font-size: 1.8rem;
            }

            .page-header p {
                font-size: 1rem;
                line-height: 1.5;
            }

            .filters {
                padding: 25px 20px;
                margin-bottom: 25px;
                border-radius: 15px;
            }

            .filters-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .filter-group {
                margin-bottom: 20px;
            }

            .filter-group label {
                font-size: 0.9rem;
                margin-bottom: 8px;
                font-weight: 600;
            }

            .filter-group input,
            .filter-group select {
                padding: 12px 14px;
                font-size: 0.9rem;
                border-radius: 10px;
                border: 2px solid #e2e8f0;
            }

            .filter-group input:focus,
            .filter-group select:focus {
                border-color: #667eea;
                outline: none;
                box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            }

            .filter-actions {
                flex-direction: column;
                gap: 12px;
            }

            .filter-actions .btn {
                width: 100%;
                font-size: 0.9rem;
                padding: 14px 20px;
                justify-content: center;
                border-radius: 10px;
            }

            .data-table-container {
                padding: 25px 20px;
                border-radius: 15px;
            }

            .table-header {
                flex-direction: column;
                gap: 20px;
                align-items: stretch;
                margin-bottom: 20px;
                padding-bottom: 15px;
            }

            .table-title {
                font-size: 1.3rem;
                text-align: center;
            }

            .table-actions {
                width: 100%;
                justify-content: center;
                flex-wrap: wrap;
                gap: 10px;
            }

            .table-actions .btn {
                flex: 1;
                min-width: 120px;
                font-size: 0.8rem;
                padding: 10px 12px;
                border-radius: 8px;
            }

            /* Mobile Card Layout - CSS moved to media query above */

            .action-buttons {
                flex-direction: column;
                gap: 6px;
            }

            .action-buttons .btn {
                width: 100%;
                padding: 8px 10px;
                font-size: 0.75rem;
                justify-content: center;
                border-radius: 6px;
            }

            .pagination {
                flex-direction: column;
                gap: 15px;
                align-items: center;
                margin-top: 20px;
                padding: 15px;
                border-radius: 12px;
            }

            .pagination button {
                width: 100%;
                max-width: 200px;
                padding: 12px;
                border-radius: 8px;
            }

            .loading {
                padding: 40px 20px;
                border-radius: 15px;
            }

            .loading i {
                font-size: 2.5rem;
                margin-bottom: 15px;
            }

            .loading p {
                font-size: 1rem;
            }

            .empty-state {
                padding: 50px 20px;
                border-radius: 15px;
            }

            .empty-state i {
                font-size: 4rem;
                margin-bottom: 20px;
            }

            .empty-state h3 {
                font-size: 1.2rem;
                margin-bottom: 12px;
            }

            .empty-state p {
                font-size: 0.95rem;
            }

            .modal-content {
                width: 95%;
                margin: 2% auto;
                max-height: 95vh;
                overflow-y: auto;
            }

            .modal-header {
                padding: 20px;
                border-radius: 20px 20px 0 0;
            }

            .modal-header h3 {
                font-size: 1.2rem;
            }

            .modal-body {
                padding: 20px;
            }

            .modal-body h4 {
                font-size: 1rem;
                margin-bottom: 12px;
            }

            .modal-body div {
                font-size: 0.9rem;
                margin-bottom: 8px;
            }

            .modal-footer {
                padding: 20px;
                flex-direction: column;
                gap: 10px;
            }

            .modal-footer .btn {
                width: 100%;
                padding: 12px;
            }

            /* Toast messages */
            .toast {
                top: 10px;
                right: 10px;
                left: 10px;
                max-width: none;
                padding: 12px 15px;
                font-size: 0.9rem;
            }

            /* Status badges */
            .status-badge {
                padding: 3px 8px;
                font-size: 0.7rem;
            }

            /* Button styling */
            .btn-sm {
                padding: 4px 8px;
                font-size: 0.7rem;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">
                <i class="fas fa-shield-alt"></i>
            </div>
            <div class="sidebar-title">Clearance Search</div>
        </div>
        
        <nav class="sidebar-menu">
            <a href="/dashboard" class="menu-item">
                <i class="fas fa-tachometer-alt"></i>
                <span>Dashboard</span>
            </a>
            <a href="/profiling" class="menu-item">
                <i class="fas fa-search"></i>
                <span>Profiling</span>
            </a>
            <a href="/data-profiling" class="menu-item">
                <i class="fas fa-database"></i>
                <span>Data Profiling</span>
            </a>
            <a href="/cekplat" class="menu-item">
                <i class="fas fa-car"></i>
                <span>Cek Plat No Jambi</span>
            </a>
            <a href="/data-cari-plat" class="menu-item active">
                <i class="fas fa-list"></i>
                <span>Data Cari Plat No</span>
            </a>
            <a href="/user-management" class="menu-item">
                <i class="fas fa-users"></i>
                <span>User Management</span>
            </a>
            <a href="/reports" class="menu-item">
                <i class="fas fa-chart-bar"></i>
                <span>Reports</span>
            </a>
            <div class="nav-submenu">
                <a href="/reports/profiling" class="menu-item">
                    <i class="fas fa-user-circle"></i>
                    <span>Profiling</span>
                </a>
            </div>
            <a href="/settings" class="menu-item">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
            </a>
            <a href="/ai-features" class="menu-item">
                <i class="fas fa-robot"></i>
                <span>AI Features</span>
            </a>
        </nav>
        
        <!-- Sidebar Footer -->
        <div class="sidebar-footer">
            <div class="user-info">
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="user-details">
                    <div class="user-name" id="userName">Admin User</div>
                    <div class="user-role" id="userRole">Administrator</div>
                </div>
            </div>
            <button class="logout-btn" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </button>
        </div>
    </div>

    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Topbar -->
        <div class="topbar">
            <div class="topbar-left">
                <button class="mobile-menu-btn" onclick="toggleSidebar()">
                    <i class="fas fa-bars"></i>
                </button>
                <h1 class="page-title">Data Cari Plat No</h1>
            </div>
            <div class="topbar-right">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Quick search..." id="globalSearch">
                </div>
                <button class="notification-btn">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge">3</span>
                </button>
            </div>
        </div>

        <!-- Content Area -->
        <div class="content-area">
        <!-- Page Header -->
        <div class="page-header">
            <h1>
                <i class="fas fa-car" style="color: #f59e0b;"></i>
                Data Cari Plat No
            </h1>
            <p>Kelola dan lihat data pencarian nomor polisi kendaraan yang telah dilakukan</p>
        </div>

        <!-- Filters -->
        <div class="filters">
            <div class="filters-grid">
                <div class="filter-group">
                    <label for="searchNoPolisi">Nomor Polisi</label>
                    <input type="text" id="searchNoPolisi" placeholder="Cari nomor polisi...">
                </div>
                <div class="filter-group">
                    <label for="searchMerk">Merk Kendaraan</label>
                    <input type="text" id="searchMerk" placeholder="Cari merk kendaraan...">
                </div>
                <div class="filter-group">
                    <label for="searchUser">User</label>
                    <select id="searchUser">
                        <option value="">Semua User</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="searchDate">Tanggal</label>
                    <input type="date" id="searchDate">
                </div>
            </div>
            <div class="filter-actions">
                <button class="btn btn-primary" onclick="applyFilters()">
                    <i class="fas fa-search"></i>
                    Filter
                </button>
                <button class="btn btn-secondary" onclick="clearFilters()">
                    <i class="fas fa-times"></i>
                    Clear
                </button>
                <button class="btn btn-primary" onclick="exportData()">
                    <i class="fas fa-download"></i>
                    Export
                </button>
            </div>
        </div>

        <!-- Data Table -->
        <div class="data-table-container">
            <div class="table-header">
                <h3 class="table-title">Data Pencarian Plat No</h3>
                <div class="table-actions">
                    <button class="btn btn-primary" onclick="refreshData()">
                        <i class="fas fa-sync-alt"></i>
                        Refresh
                    </button>
                    <button class="btn btn-secondary" onclick="testDataLoad()">
                        <i class="fas fa-flask"></i>
                        Test Load
                    </button>
                    <button class="btn btn-secondary" onclick="debugInfo()">
                        <i class="fas fa-bug"></i>
                        Debug
                    </button>
                    <button class="btn btn-primary" onclick="forceLoadData()">
                        <i class="fas fa-bolt"></i>
                        Force Load
                    </button>
                    <button class="btn btn-primary" onclick="loadDataSimple()">
                        <i class="fas fa-rocket"></i>
                        Simple Load
                    </button>
                </div>
            </div>

            <div id="loadingIndicator" class="loading">
                <i class="fas fa-spinner"></i>
                <p>Loading data...</p>
            </div>

            <div id="emptyState" class="empty-state" style="display: none;">
                <i class="fas fa-car"></i>
                <h3>Belum ada data pencarian</h3>
                <p>Data pencarian plat nomor akan muncul di sini setelah melakukan pencarian</p>
            </div>

            <table class="data-table" id="dataTable" style="display: none;">
                <thead>
                    <tr>
                        <th>No</th>
                        <th>Nomor Polisi</th>
                        <th>Nama Pemilik</th>
                        <th>Merk/Type</th>
                        <th>Tahun</th>
                        <th>Warna</th>
                        <th>Status</th>
                        <th>User</th>
                        <th>Tanggal</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="dataTableBody">
                </tbody>
            </table>

            <!-- Mobile Cards Layout -->
            <div class="mobile-cards" id="mobileCards" style="display: none;">
                <!-- Mobile cards will be populated here -->
            </div>

            <!-- Pagination -->
            <div class="pagination" id="pagination" style="display: none;">
                <button id="prevBtn" onclick="changePage(-1)">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <span id="pageInfo">Page 1 of 1</span>
                <button id="nextBtn" onclick="changePage(1)">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- View Data Modal -->
    <div class="modal" id="viewDataModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">View Data Kendaraan</h3>
                <button class="modal-close" onclick="closeViewModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body" id="modalBody">
                <!-- Data will be loaded here -->
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeViewModal()">
                    <i class="fas fa-times"></i>
                    Close
                </button>
                <button class="btn btn-primary" onclick="exportSingleData()">
                    <i class="fas fa-download"></i>
                    Export
                </button>
            </div>
        </div>
    </div>

    <script>
        class DataCariPlatApp {
            constructor() {
                this.cekplatData = [];
                this.currentPage = 1;
                this.itemsPerPage = 10;
                this.totalItems = 0;
                this.currentViewData = null;
                
                this.init();
            }

            init() {
                console.log('Initializing DataCariPlatApp...');
                console.log('Current URL:', window.location.href);
                console.log('LocalStorage session_token:', localStorage.getItem('session_token') ? 'exists' : 'not found');
                console.log('LocalStorage user_data:', localStorage.getItem('user_data') ? 'exists' : 'not found');
                
                this.setupEventListeners();
                this.loadUserData();
                
                // Load data immediately without authentication check
                console.log('Loading data immediately...');
                this.loadCekplatData();
            }

            setupEventListeners() {
                // Search inputs
                document.getElementById('searchNoPolisi').addEventListener('input', () => {
                    this.debounce(() => this.applyFilters(), 500);
                });

                document.getElementById('searchMerk').addEventListener('input', () => {
                    this.debounce(() => this.applyFilters(), 500);
                });
            }

            checkAuth() {
                console.log('Checking authentication...');
                const token = localStorage.getItem('session_token');
                console.log('Token from localStorage:', token ? token.substring(0, 20) + '...' : 'null');
                
                if (!token) {
                    console.log('No session token, redirecting to login');
                    window.location.href = '/login';
                    return;
                }

                console.log('Session token found, validating...');
                // Validate session
                fetch('/api/validate-session', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ session_token: token })
                })
                .then(response => {
                    console.log('Session validation response status:', response.status);
                    return response.json();
                })
                .then(data => {
                    console.log('Session validation result:', data);
                    if (!data.valid) {
                        console.log('Session invalid, redirecting to login');
                        localStorage.removeItem('session_token');
                        localStorage.removeItem('user_data');
                        this.showLoading(false); // Hide loading before redirect
                        window.location.href = '/login';
                    } else {
                        console.log('Session valid, continuing...');
                    }
                })
                .catch(error => {
                    console.error('Session validation error:', error);
                    this.showLoading(false); // Hide loading before redirect
                    window.location.href = '/login';
                });
            }

            loadUserData() {
                const userData = localStorage.getItem('user_data');
                if (userData) {
                    const user = JSON.parse(userData);
                    document.getElementById('userName').textContent = user.full_name || user.username;
                    
                    // Set menu visibility based on user role
                    this.setMenuVisibility(user.role);
                }
            }

            setMenuVisibility(userRole) {
                // Hide admin-only menus for non-admin users
                const adminOnlyMenus = ['user-management', 'settings'];
                
                adminOnlyMenus.forEach(menuId => {
                    const menuElement = document.querySelector(`a[href="/${menuId}"]`);
                    if (menuElement) {
                        if (userRole === 'admin') {
                            menuElement.style.display = 'flex';
                        } else {
                            menuElement.style.display = 'none';
                        }
                    }
                });
            }

            async loadCekplatData() {
                try {
                    console.log('Loading cek plat data...');
                    this.showLoading(true);
                    
                    // Try test endpoint first (no authentication required)
                    console.log('Trying test endpoint first...');
                    const testResponse = await fetch('/api/cekplat-data-test');
                    console.log('Test endpoint response status:', testResponse.status);
                    
                    if (testResponse.ok) {
                        const data = await testResponse.json();
                        console.log('Test endpoint successful!');
                        console.log('Data received:', data);
                        console.log('Data count:', data.count);
                        console.log('Data array length:', data.data ? data.data.length : 0);
                        
                        this.cekplatData = data.data || [];
                        this.totalItems = data.count || 0;
                        console.log('Cek plat data loaded:', this.cekplatData.length, 'records');
                        
                        this.renderTable();
                        this.updatePagination();
                        this.showMessage('Data loaded successfully!', 'success');
                        return;
                    }
                    
                    // If test endpoint fails, try authenticated endpoint
                    console.log('Test endpoint failed, trying authenticated endpoint...');
                    const sessionToken = localStorage.getItem('session_token');
                    
                    if (!sessionToken) {
                        console.log('No session token, showing error');
                        throw new Error('No session token available');
                    }
                    
                    const response = await fetch('/api/cekplat-data', {
                        method: 'GET',
                        headers: {
                            'Authorization': `Bearer ${sessionToken}`,
                            'Content-Type': 'application/json'
                        }
                    });
                    
                    console.log('Authenticated endpoint response status:', response.status);
                    
                    if (response.ok) {
                        const data = await response.json();
                        console.log('Authenticated endpoint successful!');
                        this.cekplatData = data.data || [];
                        this.totalItems = data.count || 0;
                        this.renderTable();
                        this.updatePagination();
                        this.showMessage('Data loaded successfully!', 'success');
                    } else if (response.status === 401) {
                        console.log('Unauthorized, clearing session');
                        localStorage.removeItem('session_token');
                        localStorage.removeItem('user_data');
                        throw new Error('Session expired, please login again');
                    } else {
                        const errorText = await response.text();
                        throw new Error(`HTTP ${response.status}: ${errorText}`);
                    }
                    
                } catch (error) {
                    console.error('Error loading cek plat data:', error);
                    
                    let errorMessage = error.message;
                    if (error.name === 'AbortError') {
                        errorMessage = 'Request timeout - please try again';
                    }
                    
                    this.showMessage('Error loading data: ' + errorMessage, 'error');
                    
                    // Show error state
                    const table = document.getElementById('dataTable');
                    const emptyState = document.getElementById('emptyState');
                    if (table) table.style.display = 'none';
                    if (emptyState) {
                        emptyState.style.display = 'block';
                        emptyState.innerHTML = `
                            <i class="fas fa-exclamation-triangle"></i>
                            <h3>Error loading data</h3>
                            <p>${errorMessage}</p>
                            <div style="margin-top: 15px; display: flex; gap: 10px; justify-content: center;">
                                <button class="btn btn-primary" onclick="window.dataCariPlatApp.refreshData()">
                                    <i class="fas fa-sync-alt"></i>
                                    Try Again
                                </button>
                                <button class="btn btn-secondary" onclick="window.dataCariPlatApp.clearSessionAndLogin()">
                                    <i class="fas fa-sign-in-alt"></i>
                                    Login Again
                                </button>
                            </div>
                        `;
                    }
                } finally {
                    this.showLoading(false);
                }
            }

            renderTable() {
                console.log('renderTable called with data length:', this.cekplatData.length);
                const tbody = document.getElementById('dataTableBody');
                const table = document.getElementById('dataTable');
                const mobileCards = document.getElementById('mobileCards');
                const emptyState = document.getElementById('emptyState');

                console.log('Elements found in renderTable:', {
                    tbody: !!tbody,
                    table: !!table,
                    mobileCards: !!mobileCards,
                    emptyState: !!emptyState
                });

                if (this.cekplatData.length === 0) {
                    console.log('No data, showing empty state');
                    if (table) table.style.display = 'none';
                    if (mobileCards) mobileCards.style.display = 'none';
                    if (emptyState) emptyState.style.display = 'block';
                    return;
                }

                // Check if mobile view
                const isMobile = window.innerWidth <= 768;
                console.log('Is mobile view:', isMobile);

                if (isMobile) {
                    // Show mobile cards layout
                    console.log('Mobile view detected, showing cards');
                    if (table) {
                        table.style.display = 'none';
                        table.style.visibility = 'hidden';
                        console.log('Table hidden');
                    }
                    if (mobileCards) {
                        mobileCards.style.display = 'block';
                        mobileCards.style.visibility = 'visible';
                        mobileCards.style.opacity = '1';
                        console.log('Mobile cards shown, style:', mobileCards.style.display);
                    }
                if (emptyState) emptyState.style.display = 'none';
                    this.renderMobileCards();
                } else {
                    // Show desktop table layout
                    console.log('Desktop view detected, showing table');
                    if (table) {
                        table.style.display = 'table';
                        console.log('Table shown');
                    }
                    if (mobileCards) {
                        mobileCards.style.display = 'none';
                        console.log('Mobile cards hidden');
                    }
                    if (emptyState) emptyState.style.display = 'none';
                    this.renderDesktopTable();
                }
            }

            renderDesktopTable() {
                const tbody = document.getElementById('dataTableBody');
                tbody.innerHTML = '';

                this.cekplatData.forEach((item, index) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${(this.currentPage - 1) * this.itemsPerPage + index + 1}</td>
                        <td><strong>${item.no_polisi || '-'}</strong></td>
                        <td>${item.nama_pemilik || '-'}</td>
                        <td>${item.merk_kendaraan || '-'} ${item.type_kendaraan || ''}</td>
                        <td>${item.tahun_pembuatan || '-'}</td>
                        <td>${item.warna_kendaraan || '-'}</td>
                        <td><span class="status-badge status-active">${item.status_kendaraan || 'AKTIF'}</span></td>
                        <td>${item.user_name || item.username || '-'}</td>
                        <td>${this.formatDate(item.search_timestamp)}</td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn btn-primary btn-sm" onclick="viewCekplatData(${item.id})">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-danger btn-sm" onclick="deleteCekplatData(${item.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            }

            renderMobileCards() {
                console.log('renderMobileCards called with data length:', this.cekplatData.length);
                const mobileCards = document.getElementById('mobileCards');
                if (!mobileCards) {
                    console.error('Mobile cards container not found!');
                    return;
                }
                
                console.log('Mobile cards container found:', mobileCards);
                console.log('Mobile cards current style:', mobileCards.style.display);
                console.log('Mobile cards computed style:', window.getComputedStyle(mobileCards).display);
                
                mobileCards.innerHTML = '';
                console.log('Mobile cards container cleared');

                if (this.cekplatData.length === 0) {
                    console.log('No data to render in mobile cards');
                    return;
                }

                this.cekplatData.forEach((item, index) => {
                    const card = document.createElement('div');
                    card.className = 'mobile-card';
                    card.innerHTML = `
                        <div class="mobile-card-header">
                            <div class="mobile-card-title">${item.no_polisi || 'No. Polisi'}</div>
                            <span class="mobile-card-status status-active">Active</span>
                        </div>
                        <div class="mobile-card-content">
                            <div class="mobile-card-field">
                                <div class="mobile-card-label">Nama Pemilik</div>
                                <div class="mobile-card-value">${item.nama_pemilik || '-'}</div>
                            </div>
                            <div class="mobile-card-field">
                                <div class="mobile-card-label">Merk/Type</div>
                                <div class="mobile-card-value">${item.merk_kendaraan || '-'} ${item.type_kendaraan || ''}</div>
                            </div>
                            <div class="mobile-card-field">
                                <div class="mobile-card-label">Tahun</div>
                                <div class="mobile-card-value">${item.tahun_kendaraan || '-'}</div>
                            </div>
                            <div class="mobile-card-field">
                                <div class="mobile-card-label">Warna</div>
                                <div class="mobile-card-value">${item.warna_kendaraan || '-'}</div>
                            </div>
                            <div class="mobile-card-field">
                                <div class="mobile-card-label">User</div>
                                <div class="mobile-card-value">${item.user_name || '-'}</div>
                            </div>
                            <div class="mobile-card-field">
                                <div class="mobile-card-label">Tanggal</div>
                                <div class="mobile-card-value">${item.search_date ? new Date(item.search_date).toLocaleDateString('id-ID') : '-'}</div>
                            </div>
                        </div>
                        <div class="mobile-card-actions">
                            <button class="btn btn-primary" onclick="viewData(${item.id})">
                                <i class="fas fa-eye"></i>
                                View
                            </button>
                            <button class="btn btn-secondary" onclick="exportSingleData(${item.id})">
                                <i class="fas fa-download"></i>
                                Export
                            </button>
                        </div>
                    `;
                    mobileCards.appendChild(card);
                    console.log('Card added for item:', item.no_polisi || 'No. Polisi');
                });
                console.log('Mobile cards rendered:', mobileCards.children.length, 'cards');
                console.log('Mobile cards final style:', mobileCards.style.display);
                console.log('Mobile cards final computed style:', window.getComputedStyle(mobileCards).display);
            }

            updatePagination() {
                const pagination = document.getElementById('pagination');
                const pageInfo = document.getElementById('pageInfo');
                const prevBtn = document.getElementById('prevBtn');
                const nextBtn = document.getElementById('nextBtn');

                if (this.totalItems <= this.itemsPerPage) {
                    pagination.style.display = 'none';
                    return;
                }

                pagination.style.display = 'flex';

                const totalPages = Math.ceil(this.totalItems / this.itemsPerPage);
                pageInfo.textContent = `Page ${this.currentPage} of ${totalPages}`;

                prevBtn.disabled = this.currentPage <= 1;
                nextBtn.disabled = this.currentPage >= totalPages;
            }

            changePage(direction) {
                const totalPages = Math.ceil(this.totalItems / this.itemsPerPage);
                const newPage = this.currentPage + direction;

                if (newPage >= 1 && newPage <= totalPages) {
                    this.currentPage = newPage;
                    this.loadCekplatData();
                }
            }

            applyFilters() {
                // Implement filtering logic here
                this.currentPage = 1;
                this.loadCekplatData();
            }

            clearFilters() {
                document.getElementById('searchNoPolisi').value = '';
                document.getElementById('searchMerk').value = '';
                document.getElementById('searchUser').value = '';
                document.getElementById('searchDate').value = '';
                this.applyFilters();
            }

            refreshData() {
                this.loadCekplatData();
            }

            clearSessionAndLogin() {
                console.log('Clearing session and redirecting to login');
                localStorage.removeItem('session_token');
                localStorage.removeItem('user_data');
                window.location.href = '/login';
            }

            async testDataLoad() {
                console.log('Test Load button clicked - calling loadCekplatData()');
                await this.loadCekplatData();
            }

            async forceLoadData() {
                try {
                    console.log('Force loading data...');
                    this.showLoading(true);
                    
                    const response = await fetch('/api/cekplat-data-test');
                    if (response.ok) {
                        const data = await response.json();
                        this.cekplatData = data.data || [];
                        this.totalItems = data.count || 0;
                        this.renderTable();
                        this.updatePagination();
                        this.showMessage('Data loaded successfully!', 'success');
                    } else {
                        throw new Error('Failed to load data');
                    }
                } catch (error) {
                    console.error('Force load error:', error);
                    this.showMessage('Error: ' + error.message, 'error');
                } finally {
                    this.showLoading(false);
                }
            }

            debugInfo() {
                console.log('=== DEBUG INFO ===');
                console.log('App instance:', this);
                console.log('Current data length:', this.cekplatData.length);
                console.log('Total items:', this.totalItems);
                console.log('Current page:', this.currentPage);
                
                // Check DOM elements
                const loading = document.getElementById('loadingIndicator');
                const table = document.getElementById('dataTable');
                const emptyState = document.getElementById('emptyState');
                const tbody = document.getElementById('dataTableBody');
                
                console.log('DOM Elements:');
                console.log('- loadingIndicator:', loading ? 'EXISTS' : 'NOT FOUND');
                console.log('- dataTable:', table ? 'EXISTS' : 'NOT FOUND');
                console.log('- emptyState:', emptyState ? 'EXISTS' : 'NOT FOUND');
                console.log('- dataTableBody:', tbody ? 'EXISTS' : 'NOT FOUND');
                
                if (loading) {
                    console.log('- loadingIndicator display:', loading.style.display);
                    console.log('- loadingIndicator computed style:', window.getComputedStyle(loading).display);
                }
                
                if (table) {
                    console.log('- dataTable display:', table.style.display);
                    console.log('- dataTable computed style:', window.getComputedStyle(table).display);
                }
                
                // Test API directly
                console.log('Testing API directly...');
                fetch('/api/cekplat-data-test')
                    .then(response => response.json())
                    .then(data => {
                        console.log('Direct API test result:', data);
                        console.log('Data count:', data.count);
                        console.log('Data array length:', data.data ? data.data.length : 0);
                    })
                    .catch(error => {
                        console.error('Direct API test error:', error);
                    });
            }

            exportData() {
                // Implement export functionality
                this.showMessage('Export functionality coming soon!', 'success');
            }

            viewCekplatData(id) {
                const data = this.cekplatData.find(item => item.id === id);
                if (!data) {
                    this.showMessage('Data not found', 'error');
                    return;
                }

                this.currentViewData = data;
                this.renderViewModal(data);
                document.getElementById('viewDataModal').classList.add('active');
            }

            renderViewModal(data) {
                const modalTitle = document.getElementById('modalTitle');
                const modalBody = document.getElementById('modalBody');

                modalTitle.textContent = `Data Kendaraan - ${data.no_polisi}`;

                modalBody.innerHTML = `
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                        <div>
                            <h4 style="color: #667eea; margin-bottom: 15px; border-bottom: 2px solid #e5e7eb; padding-bottom: 8px;">
                                <i class="fas fa-car"></i> Informasi Kendaraan
                            </h4>
                            <div style="display: grid; gap: 10px;">
                                <div><strong>Nomor Polisi:</strong> ${data.no_polisi || '-'}</div>
                                <div><strong>Nama Pemilik:</strong> ${data.nama_pemilik || '-'}</div>
                                <div><strong>Merk:</strong> ${data.merk_kendaraan || '-'}</div>
                                <div><strong>Type:</strong> ${data.type_kendaraan || '-'}</div>
                                <div><strong>Model:</strong> ${data.model_kendaraan || '-'}</div>
                                <div><strong>Tahun:</strong> ${data.tahun_pembuatan || '-'}</div>
                                <div><strong>Warna:</strong> ${data.warna_kendaraan || '-'}</div>
                                <div><strong>Status:</strong> <span class="status-badge status-active">${data.status_kendaraan || 'AKTIF'}</span></div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 style="color: #667eea; margin-bottom: 15px; border-bottom: 2px solid #e5e7eb; padding-bottom: 8px;">
                                <i class="fas fa-cogs"></i> Detail Teknis
                            </h4>
                            <div style="display: grid; gap: 10px;">
                                <div><strong>No. Rangka:</strong> ${data.no_rangka || '-'}</div>
                                <div><strong>No. Mesin:</strong> ${data.no_mesin || '-'}</div>
                                <div><strong>Silinder:</strong> ${data.silinder || '-'}</div>
                                <div><strong>Bahan Bakar:</strong> ${data.bahan_bakar || '-'}</div>
                                <div><strong>Masa Berlaku STNK:</strong> ${data.masa_berlaku_stnk || '-'}</div>
                                <div><strong>Masa Berlaku Pajak:</strong> ${data.masa_berlaku_pajak || '-'}</div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 style="color: #667eea; margin-bottom: 15px; border-bottom: 2px solid #e5e7eb; padding-bottom: 8px;">
                                <i class="fas fa-map-marker-alt"></i> Lokasi
                            </h4>
                            <div style="display: grid; gap: 10px;">
                                <div><strong>Alamat:</strong> ${data.alamat || '-'}</div>
                                <div><strong>Koordinat:</strong> ${data.coordinates_lat && data.coordinates_lon ? `${data.coordinates_lat}, ${data.coordinates_lon}` : '-'}</div>
                                <div><strong>Akurasi Geocoding:</strong> ${data.accuracy_score ? `${data.accuracy_score}%` : '-'}</div>
                                <div><strong>Display Name:</strong> ${data.display_name || '-'}</div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 style="color: #667eea; margin-bottom: 15px; border-bottom: 2px solid #e5e7eb; padding-bottom: 8px;">
                                <i class="fas fa-info-circle"></i> Informasi Pencarian
                            </h4>
                            <div style="display: grid; gap: 10px;">
                                <div><strong>User:</strong> ${data.user_name || data.username || '-'}</div>
                                <div><strong>Tanggal Pencarian:</strong> ${this.formatDate(data.search_timestamp)}</div>
                                <div><strong>IP Address:</strong> ${data.ip_address || '-'}</div>
                            </div>
                        </div>
                    </div>
                `;
            }

            exportSingleData() {
                if (this.currentViewData) {
                    const data = this.currentViewData;
                    const dataStr = JSON.stringify(data, null, 2);
                    const dataBlob = new Blob([dataStr], {type: 'application/json'});
                    const url = URL.createObjectURL(dataBlob);
                    const link = document.createElement('a');
                    link.href = url;
                    link.download = `cek_plat_${data.no_polisi}_${new Date().toISOString().split('T')[0]}.json`;
                    link.click();
                    URL.revokeObjectURL(url);
                    this.showMessage('Data exported successfully!', 'success');
                }
            }

            async deleteCekplatData(id) {
                try {
                    const sessionToken = localStorage.getItem('session_token');
                    if (!sessionToken) {
                        window.location.href = '/login';
                        return;
                    }

                    const response = await fetch(`/api/cekplat-data/${id}`, {
                        method: 'DELETE',
                        headers: {
                            'Authorization': `Bearer ${sessionToken}`,
                            'Content-Type': 'application/json'
                        }
                    });

                    if (response.ok) {
                        this.showMessage('Cek plat data deleted successfully!', 'success');
                        this.loadCekplatData(); // Reload data
                    } else if (response.status === 401) {
                        localStorage.removeItem('session_token');
                        localStorage.removeItem('user_data');
                        window.location.href = '/login';
                        return;
                    } else {
                        const error = await response.json();
                        throw new Error(error.error || `HTTP ${response.status}: ${response.statusText}`);
                    }
                    
                } catch (error) {
                    console.error('Error deleting cek plat data:', error);
                    this.showMessage('Error deleting cek plat data: ' + error.message, 'error');
                }
            }

            showLoading(show) {
                console.log('showLoading called with:', show);
                const loading = document.getElementById('loadingIndicator');
                const table = document.getElementById('dataTable');
                const emptyState = document.getElementById('emptyState');

                console.log('Elements found:', {
                    loading: !!loading,
                    table: !!table,
                    emptyState: !!emptyState
                });

                if (show) {
                    console.log('Showing loading...');
                    if (loading) loading.style.display = 'block';
                    if (table) table.style.display = 'none';
                    if (emptyState) emptyState.style.display = 'none';
                } else {
                    console.log('Hiding loading...');
                    if (loading) loading.style.display = 'none';
                }
            }

            showMessage(message, type) {
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                toast.textContent = message;
                document.body.appendChild(toast);

                setTimeout(() => toast.classList.add('show'), 100);
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => document.body.removeChild(toast), 300);
                }, 3000);
            }

            formatDate(dateString) {
                if (!dateString) return '-';
                const date = new Date(dateString);
                return date.toLocaleDateString('id-ID', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }

            debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            }
        }

        // Global functions
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            const isMobile = window.innerWidth <= 768;
            
            if (isMobile) {
                sidebar.classList.toggle('mobile-open');
                overlay.style.display = sidebar.classList.contains('mobile-open') ? 'block' : 'none';
            } else {
                sidebar.classList.toggle('collapsed');
            }
        }

        function logout() {
            const token = localStorage.getItem('session_token');
            if (token) {
                fetch('/api/logout', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ session_token: token })
                });
            }
            localStorage.removeItem('session_token');
            localStorage.removeItem('user_data');
            window.location.href = '/login';
        }

        function closeViewModal() {
            document.getElementById('viewDataModal').classList.remove('active');
        }

        function viewCekplatData(id) {
            window.dataCariPlatApp.viewCekplatData(id);
        }

        function deleteCekplatData(id) {
            if (confirm('Are you sure you want to delete this cek plat data?')) {
                const app = window.dataCariPlatApp;
                if (app) {
                    app.deleteCekplatData(id);
                }
            }
        }

        function applyFilters() {
            window.dataCariPlatApp.applyFilters();
        }

        function clearFilters() {
            window.dataCariPlatApp.clearFilters();
        }

        function exportData() {
            window.dataCariPlatApp.exportData();
        }

        function refreshData() {
            window.dataCariPlatApp.refreshData();
        }

        function testDataLoad() {
            window.dataCariPlatApp.testDataLoad();
        }

        function debugInfo() {
            window.dataCariPlatApp.debugInfo();
        }

        function forceLoadData() {
            window.dataCariPlatApp.forceLoadData();
        }

        // Global function for simple loading
        window.loadDataSimple = loadDataSimple;

        // Function to view data in a nice modal
        function viewDataSimple(data) {
            console.log('Viewing data:', data);
            
            // Create modal HTML
            const modalHTML = `
                <div class="modal active" id="viewModal" style="display: flex;">
                    <div class="modal-content" style="max-width: 800px; width: 90%;">
                        <div class="modal-header">
                            <h3><i class="fas fa-car"></i> Detail Data Kendaraan - ${data.no_polisi}</h3>
                            <button class="modal-close" onclick="closeViewModal()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                                <div>
                                    <h4 style="color: #667eea; margin-bottom: 15px; border-bottom: 2px solid #e5e7eb; padding-bottom: 8px;">
                                        <i class="fas fa-car"></i> Informasi Kendaraan
                                    </h4>
                                    <div style="display: grid; gap: 10px;">
                                        <div><strong>Nomor Polisi:</strong> <span style="color: #667eea; font-weight: bold;">${data.no_polisi || '-'}</span></div>
                                        <div><strong>Nama Pemilik:</strong> ${data.nama_pemilik || '-'}</div>
                                        <div><strong>Merk:</strong> ${data.merk_kendaraan || '-'}</div>
                                        <div><strong>Type:</strong> ${data.type_kendaraan || '-'}</div>
                                        <div><strong>Model:</strong> ${data.model_kendaraan || '-'}</div>
                                        <div><strong>Tahun:</strong> ${data.tahun_pembuatan || '-'}</div>
                                        <div><strong>Warna:</strong> ${data.warna_kendaraan || '-'}</div>
                                        <div><strong>Status:</strong> <span class="status-badge status-active">${data.status_kendaraan || 'AKTIF'}</span></div>
                                    </div>
                                </div>
                                
                                <div>
                                    <h4 style="color: #667eea; margin-bottom: 15px; border-bottom: 2px solid #e5e7eb; padding-bottom: 8px;">
                                        <i class="fas fa-cogs"></i> Detail Teknis
                                    </h4>
                                    <div style="display: grid; gap: 10px;">
                                        <div><strong>No. Rangka:</strong> ${data.no_rangka || '-'}</div>
                                        <div><strong>No. Mesin:</strong> ${data.no_mesin || '-'}</div>
                                        <div><strong>Silinder:</strong> ${data.silinder || '-'}</div>
                                        <div><strong>Bahan Bakar:</strong> ${data.bahan_bakar || '-'}</div>
                                        <div><strong>Masa Berlaku STNK:</strong> ${data.masa_berlaku_stnk || '-'}</div>
                                        <div><strong>Masa Berlaku Pajak:</strong> ${data.masa_berlaku_pajak || '-'}</div>
                                    </div>
                                </div>
                                
                                <div>
                                    <h4 style="color: #667eea; margin-bottom: 15px; border-bottom: 2px solid #e5e7eb; padding-bottom: 8px;">
                                        <i class="fas fa-map-marker-alt"></i> Lokasi
                                    </h4>
                                    <div style="display: grid; gap: 10px;">
                                        <div><strong>Alamat:</strong> ${data.alamat || '-'}</div>
                                        <div><strong>Koordinat:</strong> ${data.coordinates_lat && data.coordinates_lon ? `${data.coordinates_lat}, ${data.coordinates_lon}` : '-'}</div>
                                        <div><strong>Akurasi Geocoding:</strong> ${data.accuracy_score ? `${data.accuracy_score}%` : '-'}</div>
                                        <div><strong>Display Name:</strong> ${data.display_name || '-'}</div>
                                    </div>
                                </div>
                                
                                <div>
                                    <h4 style="color: #667eea; margin-bottom: 15px; border-bottom: 2px solid #e5e7eb; padding-bottom: 8px;">
                                        <i class="fas fa-info-circle"></i> Informasi Pencarian
                                    </h4>
                                    <div style="display: grid; gap: 10px;">
                                        <div><strong>User:</strong> ${data.user_name || data.username || '-'}</div>
                                        <div><strong>Tanggal Pencarian:</strong> ${new Date(data.search_timestamp).toLocaleString('id-ID')}</div>
                                        <div><strong>IP Address:</strong> ${data.ip_address || '-'}</div>
                                        <div><strong>User Agent:</strong> <small>${data.user_agent ? data.user_agent.substring(0, 50) + '...' : '-'}</small></div>
                                    </div>
                                </div>
                            </div>
                            
                            ${data.accuracy_details ? `
                                <div style="margin-top: 20px;">
                                    <h4 style="color: #667eea; margin-bottom: 15px; border-bottom: 2px solid #e5e7eb; padding-bottom: 8px;">
                                        <i class="fas fa-chart-line"></i> Detail Akurasi
                                    </h4>
                                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; font-family: monospace; font-size: 0.9rem; white-space: pre-wrap;">${data.accuracy_details}</div>
                                </div>
                            ` : ''}
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-secondary" onclick="closeViewModal()">
                                <i class="fas fa-times"></i>
                                Close
                            </button>
                            <button class="btn btn-primary" onclick="exportDataSimple('${data.no_polisi}', ${JSON.stringify(data).replace(/"/g, '&quot;')})">
                                <i class="fas fa-download"></i>
                                Export
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            // Add modal to body
            document.body.insertAdjacentHTML('beforeend', modalHTML);
        }

        // Function to close modal
        function closeViewModal() {
            const modal = document.getElementById('viewModal');
            if (modal) {
                modal.remove();
            }
        }

        // Add ESC key listener for modal
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeViewModal();
            }
        });

        // Function to delete data
        function deleteDataSimple(noPolisi, id) {
            if (confirm(`Apakah Anda yakin ingin menghapus data kendaraan ${noPolisi}?`)) {
                console.log('Deleting data with ID:', id);
                // Here you can add actual delete functionality
                alert(`Data ${noPolisi} akan dihapus (ID: ${id})`);
            }
        }

        // Function to export data
        function exportDataSimple(noPolisi, data) {
            try {
                const dataStr = JSON.stringify(JSON.parse(data.replace(/&quot;/g, '"')), null, 2);
                const dataBlob = new Blob([dataStr], {type: 'application/json'});
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `cek_plat_${noPolisi}_${new Date().toISOString().split('T')[0]}.json`;
                link.click();
                URL.revokeObjectURL(url);
                alert('Data berhasil diekspor!');
            } catch (error) {
                console.error('Export error:', error);
                alert('Error saat mengekspor data');
            }
        }

        function changePage(direction) {
            window.dataCariPlatApp.changePage(direction);
        }

        function exportSingleData() {
            window.dataCariPlatApp.exportSingleData();
        }

        // Debug function for mobile
        function debugMobile() {
            console.log('=== MOBILE DEBUG ===');
            console.log('Window width:', window.innerWidth);
            console.log('Is mobile:', window.innerWidth <= 768);
            
            const table = document.getElementById('dataTable');
            const mobileCards = document.getElementById('mobileCards');
            const emptyState = document.getElementById('emptyState');
            
            console.log('Table element:', table);
            console.log('Table display:', table ? table.style.display : 'not found');
            console.log('Table computed display:', table ? window.getComputedStyle(table).display : 'not found');
            
            console.log('Mobile cards element:', mobileCards);
            console.log('Mobile cards display:', mobileCards ? mobileCards.style.display : 'not found');
            console.log('Mobile cards computed display:', mobileCards ? window.getComputedStyle(mobileCards).display : 'not found');
            console.log('Mobile cards children:', mobileCards ? mobileCards.children.length : 'not found');
            
            console.log('Empty state element:', emptyState);
            console.log('Empty state display:', emptyState ? emptyState.style.display : 'not found');
            
            if (window.dataCariPlatApp) {
                console.log('App data length:', window.dataCariPlatApp.cekplatData.length);
                console.log('App data:', window.dataCariPlatApp.cekplatData);
            }
            
            console.log('=== END MOBILE DEBUG ===');
        }

        // Make debug function global
        window.debugMobile = debugMobile;

        // Function to force render existing data
        function forceRenderData() {
            console.log('Force rendering data...');
            if (window.dataCariPlatApp && window.dataCariPlatApp.cekplatData.length > 0) {
                console.log('Using app instance data');
                window.dataCariPlatApp.renderTable();
            } else {
                console.log('No app data, trying to reload...');
                loadDataSimple();
            }
        }

        // Make force render function global
        window.forceRenderData = forceRenderData;

        // Function to force correct layout
        function forceCorrectLayout() {
            console.log('Forcing correct layout...');
            const isMobile = window.innerWidth <= 768;
            console.log('Current width:', window.innerWidth, 'Is mobile:', isMobile);
            
            const table = document.getElementById('dataTable');
            const mobileCards = document.getElementById('mobileCards');
            
            if (isMobile) {
                // Force mobile layout
                if (table) {
                    table.style.display = 'none';
                    table.style.visibility = 'hidden';
                    table.style.opacity = '0';
                }
                if (mobileCards) {
                    mobileCards.style.display = 'block';
                    mobileCards.style.visibility = 'visible';
                    mobileCards.style.opacity = '1';
                }
                console.log('Forced mobile layout');
            } else {
                // Force desktop layout
                if (table) {
                    table.style.display = 'table';
                    table.style.visibility = 'visible';
                    table.style.opacity = '1';
                }
                if (mobileCards) {
                    mobileCards.style.display = 'none';
                    mobileCards.style.visibility = 'hidden';
                    mobileCards.style.opacity = '0';
                }
                console.log('Forced desktop layout');
            }
        }

        // Make force layout function global
        window.forceCorrectLayout = forceCorrectLayout;

        // Simple data loading function
        async function loadDataSimple() {
            console.log('Loading data with simple function...');
            
            try {
                const response = await fetch('/api/cekplat-data-test');
                console.log('Response status:', response.status);
                
                if (response.ok) {
                    const data = await response.json();
                    console.log('Data received:', data);
                    
                    // Hide loading
                    const loading = document.getElementById('loadingIndicator');
                    if (loading) loading.style.display = 'none';
                    
                    // Hide empty state
                    const emptyState = document.getElementById('emptyState');
                    if (emptyState) emptyState.style.display = 'none';
                    
                    // Set data to app instance if it exists
                    if (window.dataCariPlatApp) {
                        window.dataCariPlatApp.cekplatData = data.data || [];
                        window.dataCariPlatApp.totalItems = data.count || 0;
                        console.log('Data set to app instance, calling renderTable...');
                        window.dataCariPlatApp.renderTable();
                    } else {
                        console.log('App instance not found, rendering directly...');
                        // Fallback: render directly
                        renderDataDirectly(data.data || []);
                    }
                    
                    console.log('Data loaded successfully!');
                } else {
                    console.error('Failed to load data:', response.status);
                }
            } catch (error) {
                console.error('Error loading data:', error);
            }
        }

        // Fallback function to render data directly
        function renderDataDirectly(data) {
            console.log('renderDataDirectly called with data length:', data.length);
            
            const isMobile = window.innerWidth <= 768;
            console.log('Window width:', window.innerWidth);
            console.log('Is mobile view:', isMobile);
            console.log('Will render:', isMobile ? 'MOBILE CARDS' : 'DESKTOP TABLE');
            
            if (isMobile) {
                // Render mobile cards
                const mobileCards = document.getElementById('mobileCards');
                if (mobileCards) {
                    mobileCards.style.display = 'block';
                    mobileCards.style.visibility = 'visible';
                    mobileCards.style.opacity = '1';
                    mobileCards.innerHTML = '';
                    
                    data.forEach((item, index) => {
                        const card = document.createElement('div');
                        card.className = 'mobile-card';
                        card.innerHTML = `
                            <div class="mobile-card-header">
                                <div class="mobile-card-title">${item.no_polisi || 'No. Polisi'}</div>
                                <span class="mobile-card-status status-active">${item.status_kendaraan || 'AKTIF'}</span>
                            </div>
                            <div class="mobile-card-content">
                                <div class="mobile-card-field">
                                    <div class="mobile-card-label">Nama Pemilik</div>
                                    <div class="mobile-card-value">${item.nama_pemilik || '-'}</div>
                                </div>
                                <div class="mobile-card-field">
                                    <div class="mobile-card-label">Merk/Type</div>
                                    <div class="mobile-card-value">${item.merk_kendaraan || '-'} ${item.type_kendaraan || ''}</div>
                                </div>
                                <div class="mobile-card-field">
                                    <div class="mobile-card-label">Tahun</div>
                                    <div class="mobile-card-value">${item.tahun_pembuatan || '-'}</div>
                                </div>
                                <div class="mobile-card-field">
                                    <div class="mobile-card-label">Warna</div>
                                    <div class="mobile-card-value">${item.warna_kendaraan || '-'}</div>
                                </div>
                                <div class="mobile-card-field">
                                    <div class="mobile-card-label">User</div>
                                    <div class="mobile-card-value">${item.user_name || item.username || '-'}</div>
                                </div>
                                <div class="mobile-card-field">
                                    <div class="mobile-card-label">Tanggal</div>
                                    <div class="mobile-card-value">${item.search_timestamp ? new Date(item.search_timestamp).toLocaleDateString('id-ID') : '-'}</div>
                                </div>
                            </div>
                            <div class="mobile-card-actions">
                                <button class="btn btn-primary" onclick="viewDataSimple(${JSON.stringify(item).replace(/"/g, '&quot;')})">
                                    <i class="fas fa-eye"></i>
                                    View
                                </button>
                                <button class="btn btn-danger" onclick="deleteDataSimple('${item.no_polisi}', ${item.id})">
                                    <i class="fas fa-trash"></i>
                                    Delete
                                </button>
                            </div>
                        `;
                        mobileCards.appendChild(card);
                    });
                    
                    console.log('Mobile cards rendered:', mobileCards.children.length, 'cards');
                }
                
                // Hide table
                    const table = document.getElementById('dataTable');
                if (table) {
                    table.style.display = 'none';
                    table.style.visibility = 'hidden';
                }
            } else {
                // Render desktop table
                console.log('Rendering desktop table...');
                const table = document.getElementById('dataTable');
                if (table) {
                    table.style.display = 'table';
                    table.style.visibility = 'visible';
                    table.style.opacity = '1';
                    console.log('Desktop table shown');
                }
                
                // Hide mobile cards
                const mobileCards = document.getElementById('mobileCards');
                if (mobileCards) {
                    mobileCards.style.display = 'none';
                    mobileCards.style.visibility = 'hidden';
                    mobileCards.style.opacity = '0';
                    console.log('Mobile cards hidden');
                }
                    
                    // Populate table
                    const tbody = document.getElementById('dataTableBody');
                if (tbody) {
                        tbody.innerHTML = '';
                    data.forEach((item, index) => {
                            const row = document.createElement('tr');
                            row.innerHTML = `
                                <td>${index + 1}</td>
                                <td><strong style="color: #667eea;">${item.no_polisi || '-'}</strong></td>
                                <td>${item.nama_pemilik || '-'}</td>
                                <td>${item.merk_kendaraan || '-'} ${item.type_kendaraan || ''}</td>
                                <td>${item.tahun_pembuatan || '-'}</td>
                                <td>${item.warna_kendaraan || '-'}</td>
                                <td><span class="status-badge status-active">${item.status_kendaraan || 'AKTIF'}</span></td>
                                <td>${item.user_name || item.username || '-'}</td>
                            <td>${item.search_timestamp ? new Date(item.search_timestamp).toLocaleDateString('id-ID') : '-'}</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-primary btn-sm" onclick="viewDataSimple(${JSON.stringify(item).replace(/"/g, '&quot;')})" title="View Details">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="deleteDataSimple('${item.no_polisi}', ${item.id})" title="Delete">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            `;
                            tbody.appendChild(row);
                        });
                    
                    console.log('Desktop table rendered:', tbody.children.length, 'rows');
                }
            }
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM Content Loaded, initializing...');
            console.log('Current time:', new Date().toISOString());
            
            try {
                // Initialize the main app
                window.dataCariPlatApp = new DataCariPlatApp();
                console.log('DataCariPlatApp initialized successfully');

                // Add resize event listener for responsive layout
                window.addEventListener('resize', () => {
                    console.log('Window resized, current width:', window.innerWidth);
                    if (window.dataCariPlatApp && window.dataCariPlatApp.cekplatData.length > 0) {
                        console.log('Re-rendering table due to resize');
                        window.dataCariPlatApp.renderTable();
                    }
                });

                // Force initial render after a short delay to ensure DOM is ready
                setTimeout(() => {
                    if (window.dataCariPlatApp && window.dataCariPlatApp.cekplatData.length > 0) {
                        console.log('Force re-render after DOM ready');
                        window.dataCariPlatApp.renderTable();
                    }
                }, 1000);
                
                // Also try simple loading as backup
                setTimeout(() => {
                    console.log('Running simple data load as backup...');
                    loadDataSimple();
                }, 1000);
                
            } catch (error) {
                console.error('Error initializing DataCariPlatApp:', error);
                console.error('Error stack:', error.stack);
                
                // Fallback to simple loading
                console.log('Falling back to simple data loading...');
                setTimeout(() => {
                    loadDataSimple();
                }, 1000);
            }
        });
    </script>
</body>
</html>
